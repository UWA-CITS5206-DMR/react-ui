<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Simulation Platform - API Documentation</title>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-standalone-preset.js"></script>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui.css" />
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .header {
            background: #1f2937;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2rem;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.8;
        }
        .tabs {
            display: flex;
            background: #f3f4f6;
            border-bottom: 1px solid #e5e7eb;
        }
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .tab:hover {
            background: #e5e7eb;
        }
        .tab.active {
            background: white;
            border-bottom-color: #3b82f6;
            color: #3b82f6;
        }
        .content {
            display: none;
            padding: 20px;
        }
        .content.active {
            display: block;
        }
        #swagger-ui {
            max-width: none;
        }
        .api-explorer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        .links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .link-card {
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s;
        }
        .link-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .link-card h3 {
            margin: 0 0 10px 0;
            color: #3b82f6;
        }
        .link-card p {
            margin: 0;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Medical Simulation Platform</h1>
        <p>API Documentation & Schema Explorer</p>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showTab('overview')">æ¦‚è§ˆ</button>
        <button class="tab" onclick="showTab('swagger')">Swagger UI</button>
        <button class="tab" onclick="showTab('interactive')">äº¤äº’å¼æµè§ˆå™¨</button>
        <button class="tab" onclick="showTab('typedoc')">TypeDoc</button>
    </div>

    <div id="overview" class="content active">
        <div class="api-explorer-content">
            <h2>API æ–‡æ¡£æ¦‚è§ˆ</h2>
            <p>æ¬¢è¿ä½¿ç”¨åŒ»ç–—æ¨¡æ‹Ÿå¹³å°çš„ API æ–‡æ¡£ã€‚è¿™é‡Œæä¾›äº†å¤šç§æ–¹å¼æ¥æµè§ˆå’Œç†è§£æˆ‘ä»¬çš„ APIã€‚</p>
            
            <div class="links">
                <div class="link-card">
                    <h3>ğŸ”§ Swagger UI</h3>
                    <p>åŸºäº OpenAPI 3.0 è§„èŒƒçš„äº¤äº’å¼ API æ–‡æ¡£ï¼Œæ”¯æŒåœ¨çº¿æµ‹è¯•</p>
                </div>
                
                <div class="link-card">
                    <h3>ğŸ¯ äº¤äº’å¼æµè§ˆå™¨</h3>
                    <p>è‡ªå®šä¹‰çš„ React ç»„ä»¶ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p>
                </div>
                
                <div class="link-card">
                    <h3>ğŸ“š TypeDoc</h3>
                    <p>ä» TypeScript ä»£ç è‡ªåŠ¨ç”Ÿæˆçš„è¯¦ç»†ç±»å‹æ–‡æ¡£</p>
                </div>
                
                <div class="link-card">
                    <h3>ğŸ“Š JSON Schema</h3>
                    <p><a href="./api-schema.json" target="_blank">ä¸‹è½½ API Schema JSON</a></p>
                </div>
                
                <div class="link-card">
                    <h3>ğŸ”— OpenAPI JSON</h3>
                    <p><a href="./openapi.json" target="_blank">ä¸‹è½½ OpenAPI è§„èŒƒ</a></p>
                </div>
            </div>

            <h3>å¿«é€Ÿå¼€å§‹</h3>
            <pre><code># è·å–æ‚£è€…åˆ—è¡¨
GET /api/sessions/session-1/patients

# è·å–æ‚£è€…è¯¦æƒ…
GET /api/patients/{patientId}

# åˆ›å»º SOAP ç¬”è®°
POST /api/patients/{patientId}/soap-notes</code></pre>
        </div>
    </div>

    <div id="swagger" class="content">
        <div id="swagger-ui"></div>
    </div>

    <div id="interactive" class="content">
        <div class="api-explorer-content">
            <h2>äº¤äº’å¼ API æµè§ˆå™¨</h2>
            <p>è®¿é—®: <a href="http://localhost:5175/api-explorer" target="_blank">http://localhost:5175/api-explorer</a></p>
            <p>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ React ç»„ä»¶ï¼Œæä¾›äº†æ›´ç›´è§‚çš„ API æµè§ˆä½“éªŒã€‚</p>
        </div>
    </div>

    <div id="typedoc" class="content">
        <div class="api-explorer-content">
            <h2>TypeScript ç±»å‹æ–‡æ¡£</h2>
            <p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ TypeDoc æ–‡æ¡£ï¼š</p>
            <pre><code>npm run docs:generate</code></pre>
            <p>ç„¶åè®¿é—®: <a href="./api/index.html" target="_blank">./api/index.html</a></p>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // éšè—æ‰€æœ‰å†…å®¹
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹å’Œæ ‡ç­¾
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // åˆå§‹åŒ– Swagger UI
            if (tabName === 'swagger') {
                initSwaggerUI();
            }
        }

        function initSwaggerUI() {
            if (document.getElementById('swagger-ui').innerHTML !== '') {
                return; // å·²ç»åˆå§‹åŒ–è¿‡äº†
            }

            SwaggerUIBundle({
                url: './openapi.json',
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout"
            });
        }
    </script>
</body>
</html>
